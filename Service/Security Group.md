# AWS 보안 그룹(Security Group) 핵심 가이드

## 1. 보안 그룹(Security Group)이란?

보안 그룹은 EC2 인스턴스, RDS 등 AWS 리소스에 대한 트래픽을 제어하는 **가상 방화벽**입니다. 리소스라는 '집' 바로 앞에서 출입을 통제하는 '문지기' 역할을 수행하며, 인스턴스 레벨에서 보안을 책임집니다.

---

## 2. 보안 그룹의 핵심 작동 원리

* **인스턴스 단위 보호:** 네트워크 인터페이스(ENI) 레벨에서 작동하므로, 같은 서브넷 안에 있더라도 인스턴스마다 서로 다른 보안 규칙을 적용할 수 있습니다.
* **허용(Allow) 기반 모델:** 특정 트래픽을 명시적으로 '거부'하는 규칙은 만들 수 없습니다. 기본적으로 모든 트래픽은 차단되며, **허용 규칙에 정의된 트래픽만 통과**할 수 있습니다.
* **상태 저장(Stateful) 방식:** 인바운드로 들어온 요청이 허용되었다면, 해당 요청에 대한 응답(아웃바운드)은 규칙 설정과 상관없이 **자동으로 허용**됩니다. (반대의 경우도 동일)

---

## 3. 인바운드 vs 아웃바운드 규칙

| 구분 | 설명 | 주요 설정 예시 |
| --- | --- | --- |
| **인바운드 (Inbound)** | 외부에서 인스턴스로 **들어오는** 트래픽 제어 | HTTP(80), HTTPS(443), SSH(22) |
| **아웃바운드 (Outbound)** | 인스턴스에서 외부로 **나가는** 트래픽 제어 | OS 업데이트, 외부 API 호출, DB 연결 |

---

## 4. 규칙 설정 시 '소스(Source)'의 종류

누가 접근할 수 있는지 정의하는 방식에는 두 가지 유연한 방법이 있습니다.

1. **IP 범위 기반 (CIDR):** 특정 IP 주소나 대역을 지정합니다. (예: `210.123.x.x/32` - 특정 사용자 전용)
2. **보안 그룹 참조 (Security Group ID):** 다른 보안 그룹의 ID를 소스로 지정합니다.
* **실무 권장 방식:** 웹 서버 그룹(Web-SG)에 있는 인스턴스들만 DB 그룹(DB-SG)에 접근할 수 있도록 설정할 때 사용합니다. IP가 변경되어도 그룹 ID 기반으로 자동 연동되어 관리가 매우 편리합니다.



---

## 5. 네트워크 ACL(NACL)과의 차이점

보안 그룹과 네트워크 ACL은 상호 보완적인 관계이지만 작동 방식은 크게 다릅니다.

| 구분 | 보안 그룹 (Security Group) | 네트워크 ACL (NACL) |
| --- | --- | --- |
| **적용 범위** | **인스턴스(ENI) 단위** | **서브넷 단위** |
| **상태 유지** | **Stateful** (응답 자동 허용) | **Stateless** (나가는 규칙 수동 필요) |
| **규칙 성격** | 허용 규칙만 가능 | 허용 및 **거부** 규칙 모두 가능 |
| **비유** | 개별 주택의 문지기 | 아파트 단지 정문의 경비실 |