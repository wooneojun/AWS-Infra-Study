# AWS 재해 복구(DR) 전략: 다중 사이트 액티브-액티브 및 총정리

## 1. 다중 사이트 액티브-액티브 (Multi-Site Active-Active) 개념

두 개 이상의 AWS 리전에서 동시에 서비스를 운영하는 방식입니다. 모든 리전이 활성화(Active)된 상태에서 실제 트래픽을 처리하므로 다음과 같은 특징을 가집니다.

* **무중단 서비스:** 특정 리전에 장애가 발생해도 다른 리전이 즉시 가동 중이므로 사용자는 장애를 거의 느끼지 못합니다.
* **지표 최적화:** 복구 시간 목표(RTO)와 복구 시점 목표(RPO)가 0에 가깝습니다.

---

## 2. 핵심 구현 기술 및 아키텍처

리전 간 데이터 실시간 동기화가 가장 큰 과제입니다. 데이터는 실시간 복제와 동시에 주기적인 백업을 병행하여 데이터 훼손 시 복구할 수 있는 수단을 마련해야 합니다.

### 2.1 데이터베이스 글로벌화

* **Amazon DynamoDB 글로벌 테이블:** 여러 리전에 데이터를 1초 이내로 복제하는 가장 최적화된 옵션입니다.
* **Amazon Aurora 글로벌 데이터베이스:** 마스터 리전에서 쓰기가 발생하면 최대 5개의 보조 리전에 1초 이내로 데이터를 복제합니다.

### 2.2 트래픽 분산

* **Amazon Route 53:** 사용자와 가장 가까운 리전으로 접속하게 하거나 특정 비율로 로드밸런싱하는 정책을 사용합니다.
* **위치 기반 라우팅:** 사용자의 접속 위치를 기반으로 특정 리전에 종속시켜 데이터 쓰기 경합을 방지할 수 있습니다.

---

## 3. 읽기/쓰기 전략

### 3.1 로컬 읽기 / 전역 쓰기 (Global Write) 패턴

강한 일관성을 보장하기 위해 사용합니다. 읽기는 로컬 리전에서 처리하고, 쓰기는 하나의 마스터 리전에서만 수행합니다.

* **DynamoDB:** 모든 쓰기 요청을 전역 쓰기 리전으로 전달하여 처리합니다.
* **Aurora:** 보조 리전의 읽기 전용 인스턴스에서 발생한 쓰기 작업을 전역 쓰기 리전으로 자동 전달하는 '쓰기 전달' 기능을 활용할 수 있습니다.

### 3.2 로컬 읽기 / 쓰기 분할 (Write Partitioning) 패턴

쓰기 작업이 많은 워크로드에 적합하며, 데이터를 파티션 키 기준으로 분산하여 각 리전에 홈 리전(Home Region)을 할당합니다.

* **작동 방식:** 쓰기가 발생한 리전을 기반으로 홈 리전에서 처리하며, 데이터는 전역적으로 복제됩니다.
* **장점:** 쓰기 워크로드가 여러 리전으로 분산되어 성능이 향상되지만 설계가 복잡합니다.

### 3.3 장애 조치 (Failover)

* **Route 53:** DNS 레코드를 갱신하여 장애 리전에서 정상 리전으로 트래픽을 전환합니다. 이때 TTL 설정을 짧게 유지하는 것이 RTO 단축의 핵심입니다.
* **AWS Global Accelerator:** DNS 캐싱에 의존하지 않고 고정 IP를 통해 트래픽을 즉시 전환하며, 가장 빠른 네트워크 경로를 제공합니다.

---

## 4. 전략별 장단점 및 최종 요약

### 4.1 액티브-액티브 장단점

* **장점:** 무중단 서비스가 가능하며, 전 세계 사용자에게 가장 빠른 응답 속도를 제공합니다.
* **단점:** 인프라 비용이 리전 개수만큼 늘어나며, 데이터 충돌 방지를 위한 고도의 설계가 필요합니다.

### 4.2 AWS 재해 복구(DR) 전략 최종 요약

| 전략 | 비용 | 복구 속도 (RTO) | 데이터 손실 (RPO) | 한 줄 요약 |
| --- | --- | --- | --- | --- |
| **백업 및 복구** | 가장 저렴 | 수 시간 | 수십 분 ~ 수 시간 | 재해 발생 시 백업본으로 새로 구축 |
| **파일럿 라이트** | 저렴 | 수십 분 | 수 분 이내 | DB만 상시 가동, 서버는 필요시 실행 |
| **웜 스탠바이** | 중간 | 수 분 이내 | 수 분 이내 | 최소 사양으로 전체 시스템 상시 가동 |
| **액티브-액티브** | 가장 비쌈 | 거의 0 | 거의 0 | 두 곳 이상의 리전에서 동시 서비스 |