# 클라우드 네이티브 앱 개발을 위한 12-Factor App 체크리스트 (AWS 적용 가이드)

본 문서는 SaaS 애플리케이션의 이식성과 확장성을 극대화하기 위한 12가지 원칙과 이를 AWS 환경에서 구현하는 구체적인 방안을 다룹니다. 클라우드 환경에서 서버는 언제든 교체 가능한 '소모품'으로 취급되는 것이 핵심입니다.

## 1. Codebase (코드베이스)

* **핵심:** 하나의 버전 관리 저장소(Git)가 하나의 서비스를 담당하며, 동일한 코드가 다양한 환경(Dev, Stage, Prod)에 배포되어야 합니다.
* **AWS 적용:** AWS CodeCommit이나 GitHub을 소스로 활용하고, **AWS CodePipeline**을 구축하여 단일 소스 저장소에서 리전별/계정별 배포를 자동화합니다.

## 2. Dependencies (종속성)

* **핵심:** 애플리케이션의 모든 라이브러리는 코드 내에 명시적으로 선언되어야 하며, 실행 환경에 설치된 시스템 도구에 의존해서는 안 됩니다.
* **AWS 적용:** `npm`, `pip`, `maven` 등을 통해 종속성을 명시하고, **Amazon ECR/ECS**를 활용하여 Docker 컨테이너 단위로 실행 환경을 패키징함으로써 일관성을 확보합니다.

## 3. Config (구성)

* **핵심:** 데이터베이스 자격 증명이나 API 키와 같은 설정값은 코드와 철저히 분리하여 환경 변수(Environment Variables)에 저장해야 합니다.
* **AWS 적용:** **AWS Secrets Manager** 또는 **Systems Manager Parameter Store**에 보안 정보를 저장하고, 애플리케이션 런타임 시에 이를 호출하도록 설계합니다.

## 4. Backing Services (지원 서비스)

* **핵심:** 데이터베이스, 메시지 큐, 캐시 등은 언제든 교체 가능한 부착된 자원(Attached Resources)으로 취급해야 합니다.
* **AWS 적용:** 로컬 DB 대신 **Amazon RDS**를, 로컬 파일 시스템 대신 **Amazon S3**를 사용합니다. 코드 수정 없이 엔드포인트 정보 변경만으로 서비스를 교체할 수 있어야 합니다.

## 5. Build, Release, Run (빌드, 릴리스, 실행)

* **핵심:** 빌드, 릴리스, 실행 단계는 엄격히 분리되어야 하며, 한 번 생성된 릴리스는 수정할 수 없는 불변(Immutable) 상태여야 합니다.
* **AWS 적용:** **AWS CodeBuild**로 빌드하고, 환경 설정과 결합하여 릴리스를 생성한 뒤 **AWS CodeDeploy**를 통해 배포합니다. 가동 중인 서버에 직접 접속하여 코드를 수정하는 것은 금지됩니다.

## 6. Processes (프로세스)

* **핵심:** 애플리케이션은 무상태(Stateless) 프로세스로 실행되어야 하며, 유지되어야 하는 모든 데이터는 외부 저장소에 저장되어야 합니다.
* **AWS 적용:** 세션 정보는 **Amazon ElastiCache(Redis)**에, 영구 데이터는 S3나 RDS에 저장합니다. 이를 통해 어떤 인스턴스가 요청을 처리하더라도 동일한 결과를 보장합니다.

## 7. Port Binding (포트 바인딩)

* **핵심:** 앱 스스로 특정 포트를 점유하여 서비스를 노출해야 하며, 특정 웹 서버 엔진에 종속되지 않아야 합니다.
* **AWS 적용:** 애플리케이션이 직접 특정 포트(예: 8080)를 열고 대기하며, **Application Load Balancer(ALB)**가 해당 포트로 트래픽을 전달하는 구조를 사용합니다.

## 8. Concurrency (동시성)

* **핵심:** 수직 확장(Scale-up)이 아닌 프로세스 복제본을 늘리는 수평 확장(Scale-out)을 통해 부하를 분산해야 합니다.
* **AWS 적용:** **Auto Scaling Group(ASG)**을 설정하여 트래픽 증가에 따라 EC2 인스턴스 수를 조절하거나, **AWS Lambda**를 활용하여 요청 단위로 실행 횟수를 확장합니다.

## 9. Disposability (일회성)

* **핵심:** 프로세스는 신속하게 시작되고 안전하게 종료(Graceful Shutdown)되어야 합니다. 갑작스러운 종료 시에도 시스템은 안정성을 유지해야 합니다.
* **AWS 적용:** 장애 발생 시 즉시 새 인스턴스로 교체되는 **Self-healing** 구조를 적용합니다. 종료 신호(SIGTERM) 수신 시 현재 진행 중인 작업을 안전하게 마무리하도록 로직을 구현합니다.

## 10. Dev/Prod Parity (개발/프로덕션 환경 동등성)

* **핵심:** 개발, 스테이징, 운영 환경 간의 차이를 최소화하여 환경 차이로 인한 버그를 방지해야 합니다.
* **AWS 적용:** **AWS CloudFormation** 또는 **Terraform**과 같은 IaC(Infrastructure as Code)를 사용하여 모든 환경의 인프라를 동일한 코드로 생성하고 관리합니다.

## 11. Logs (로그)

* **핵심:** 애플리케이션은 로그 파일 관리(저장, 회전 등)에 관여하지 않고, 단순히 표준 출력(stdout)으로 로그를 내보내야 합니다.
* **AWS 적용:** 표준 출력으로 내보낸 로그 스트림을 **Amazon CloudWatch Logs**가 수집하도록 설정하여 중앙 집중식 분석 및 저장을 수행합니다.

## 12. Admin Processes (관리 프로세스)

* **핵심:** DB 마이그레이션이나 일회성 데이터 조사 등의 관리 작업도 실제 서비스와 동일한 환경에서 격리된 프로세스로 실행되어야 합니다.
* **AWS 적용:** 운영 서버 직접 접속 대신 **AWS Systems Manager Run Command**를 사용하거나, 관리 전용 **AWS Lambda** 함수를 생성하여 자동화된 방식으로 작업을 수행합니다.

---

### 요약: 클라우드 네이티브 설계 지침

| 구분 | 주요 설계 원칙 | 추천 AWS 서비스 |
| --- | --- | --- |
| **코드 및 배포** | 코드베이스(1), 빌드/릴리스/실행(5) | CodeSuite (Commit, Build, Deploy) |
| **환경 관리** | 종속성(2), 구성(3), 환경 동등성(10) | Secrets Manager, CloudFormation |
| **인프라 연결** | 지원 서비스(4), 포트 바인딩(7) | S3, RDS, ALB |
| **확장 및 안정성** | 프로세스(6), 동시성(8), 일회성(9) | Auto Scaling, ElastiCache, Lambda |
| **운영 분석** | 로그(11), 관리 프로세스(12) | CloudWatch, Systems Manager |